package com.capg.hibernate;

import javax.transaction.Transaction;

import org.hibernate.SessionFactory;
import org.hibernate.classic.Session;

public class InsertStudent {
	public static void main(String[] args) {
		// Start Hibernate Framework
		
		Configration cfg = new Configration();
		cfg.configure();	// loads hibernate.cfg.xml
		
		// build SessionFactory
		SessionFactory factory = cfg.buildSessionFactory();
		//Open Session
		Session session = factory.OpenSession();
		// Begin Transaction
		Transaction tx = session.beignTransaction();
		
		try {
			Student st = new Student();
			st.setSno(9);
			st.setSname("Ram");
			st.setEmail("ram@gamil.com");
			st.setMobile(777777777L);
			
			session.save(st);
			
			// commit transaction
			
			tx.commit();
			System.out.println("Records inserted successfully");
			
		}catch(Exception e) {
			tx.rollback();
			e.printStackTrace();
		}finally {
			session.close();
			factory.close();
		}
	}

}
